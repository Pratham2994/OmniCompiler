@import "tailwindcss";

/* Omni Compiler — Design Tokens (Light/Dark) */
:root {
  --oc-bg: #f6f6f8;
  --oc-fg: #0b0d12;
  --oc-surface: #ffffff;
  --oc-surface-2: #f3f4f6;
  --oc-border: rgba(17,17,17,0.08);

  --oc-primary-500: #8b5cf6; /* light purple */
  --oc-primary-600: #7c3aed; /* vibrant purple */
  --oc-primary-700: #6d28d9; /* dark purple */

  --oc-muted: #6b7280;
  --oc-ring: var(--oc-primary-500);
  --oc-on-primary: #ffffff; /* readable foreground on primary in light */

  --oc-success: #22c55e;
  --oc-danger: #ef4444;

  /* Console line colors (Light) */
  --oc-console-log: #64748b; /* slate-500 (duller logs) */
  --oc-console-out: #16a34a; /* green-600 (stdout) */
  --oc-console-err: #dc2626; /* red-600 (stderr) */
  --oc-console-in:  #0891b2; /* cyan-700 (stdin echo) */
}

/* Dark (VS Code Dark+) — also applies when Run page sets theme-dark */
.dark, .theme-dark {
  --oc-bg: #0b0d12;
  --oc-fg: #e5e7eb;
  --oc-surface: #0f121a;
  --oc-surface-2: #10141d;
  --oc-border: rgba(255,255,255,0.10);

  --oc-primary-500: #a78bfa;
  --oc-primary-600: #8b5cf6;
  --oc-primary-700: #7c3aed;

  --oc-muted: #9ca3af;
  --oc-ring: var(--oc-primary-600);
  --oc-on-primary: #ffffff; /* readable foreground on purple in dark */

  /* Console line colors (Dark) */
  --oc-console-log: #9ca3af; /* gray-400 (duller logs) */
  --oc-console-out: #86efac; /* emerald-300 (stdout) */
  --oc-console-err: #f87171; /* red-400 (stderr) */
  --oc-console-in:  #7dd3fc; /* sky-300 (stdin echo) */
}

/* Light (VS Code Light+) — uses :root defaults; class present for clarity */
.theme-light {
  /* Intentionally empty: falls back to :root tokens */
}

/* High Contrast (VS Code High Contrast) */
.theme-hc {
  --oc-bg: #000000;
  --oc-fg: #ffffff;
  --oc-surface: #0b0b0b;
  --oc-surface-2: #141414;
  --oc-border: rgba(255,255,255,0.35);

  /* Accent with strong yellow similar to HC emphasis */
  --oc-primary-500: #f5d90a;
  --oc-primary-600: #f0c000;
  --oc-primary-700: #e0a800;

  --oc-muted: #e5e7eb;
  --oc-ring: var(--oc-primary-600);
  --oc-on-primary: #000000; /* black text on yellow for true HC */

  /* Console line colors (High Contrast) */
  --oc-console-log: #bfbfbf; /* lighter gray for logs */
  --oc-console-out: #f5d90a; /* yellow (stdout) */
  --oc-console-err: #ff4d4d; /* vivid red (stderr) */
  --oc-console-in:  #00d0ff; /* bright cyan (stdin echo) */
}

/* App background/text */
html, body, #root {
  background-color: var(--oc-bg);
  color: var(--oc-fg);
}

/* Cards / Panels */
.oc-card {
  background: var(--oc-surface);
  border: 1px solid var(--oc-border);
  border-radius: 0.5rem;
  box-shadow: 0 1px 2px rgba(0,0,0,0.02);
}

/* Buttons */
.oc-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  height: 2.25rem;
  padding: 0 0.75rem;
  border-radius: 0.5rem;
  font-size: 0.875rem;
  font-weight: 500;
  border: 1px solid var(--oc-border);
  background: var(--oc-surface);
  color: var(--oc-fg);
  transition: background-color 150ms ease, color 150ms ease, border-color 150ms ease, box-shadow 150ms ease, transform 50ms ease;
}
.oc-btn:hover { background: var(--oc-surface-2); }
.oc-btn:active { transform: translateY(0.5px); }
.oc-btn:focus-visible { outline: none; box-shadow: 0 0 0 2px var(--oc-ring); }

.oc-btn-primary {
  border: 1px solid transparent;
  background-image: linear-gradient(135deg, var(--oc-primary-600), var(--oc-primary-700));
  color: var(--oc-on-primary);
  box-shadow: 0 1px 2px rgba(124,58,237,0.25);
}
.oc-btn-primary:hover { filter: brightness(1.05); }
.oc-btn-primary:active { transform: translateY(0.5px); }
.oc-btn-primary:disabled { opacity: 0.7; cursor: not-allowed; }

.oc-icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 2.125rem;
  width: 2.125rem;
  border-radius: 0.5rem;
  border: 1px solid var(--oc-border);
  background: var(--oc-surface);
  color: var(--oc-fg);
  transition: background-color 150ms ease, color 150ms ease, border-color 150ms ease, box-shadow 150ms ease, transform 50ms ease;
}
.oc-icon-btn:hover { background: var(--oc-surface-2); }
.oc-icon-btn:active { transform: translateY(0.5px); }
.oc-icon-btn:focus-visible { outline: none; box-shadow: 0 0 0 2px var(--oc-ring); }

/* Inputs */
.oc-input {
  height: 2.5rem;
  width: 100%;
  border-radius: 0.5rem;
  border: 1px solid var(--oc-border);
  background: var(--oc-surface-2);
  color: var(--oc-fg);
  padding: 0 0.75rem;
  font-size: 0.875rem;
  transition: border-color 150ms ease, box-shadow 150ms ease, background-color 150ms ease;
}
.oc-input::placeholder { color: var(--oc-muted); }
.oc-input:focus { outline: none; border-color: var(--oc-primary-600); box-shadow: 0 0 0 2px var(--oc-ring); }

/* Chips / badges */
.oc-chip {
  display: inline-flex;
  align-items: center;
  height: 2rem;
  padding: 0 0.5rem;
  font-size: 0.75rem;
  border-radius: 0.375rem;
  background: var(--oc-surface-2);
  border: 1px solid var(--oc-border);
  color: var(--oc-fg);
}

/* CFG view */
.oc-cfg-item { position: relative; list-style: none; }
.oc-cfg-row { display: flex; align-items: center; gap: 0.4rem; }
.oc-cfg-toggle {
  height: 1.75rem;
  width: 1.75rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.5rem;
  border: 1px solid var(--oc-border);
  background: var(--oc-surface-2);
  color: var(--oc-fg);
  transition: background-color 150ms ease, transform 120ms ease, box-shadow 150ms ease;
}
.oc-cfg-toggle:hover { background: var(--oc-surface); }
.oc-cfg-toggle:active { transform: translateY(0.5px); }
.oc-cfg-dot {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1rem;
  height: 1rem;
  border-radius: 999px;
  box-shadow: 0 0 0 2px var(--oc-surface), 0 0 0 3px var(--oc-border);
}
.oc-cfg-arrow {
  flex: 0 0 1.6rem;
  height: 2px;
  background: var(--oc-border);
  border-radius: 999px;
  position: relative;
  margin-top: 0.4rem;
}
.oc-cfg-arrow::after {
  content: '';
  position: absolute;
  right: -4px;
  top: -3px;
  width: 0;
  height: 0;
  border-top: 5px solid transparent;
  border-bottom: 5px solid transparent;
  border-left: 6px solid var(--oc-border);
}
.oc-cfg-node {
  display: block;
  width: 100%;
  text-align: left;
  border: 1px solid var(--oc-border);
  background: linear-gradient(135deg, var(--oc-surface), var(--oc-surface-2));
  color: var(--oc-fg);
  border-radius: 999px;
  padding: 0.65rem 0.9rem;
  transition: transform 140ms ease, box-shadow 160ms ease, border-color 140ms ease, background-color 160ms ease;
}
.oc-cfg-node:hover { transform: translateY(-1px); }
.oc-cfg-node:active { transform: translateY(0); }
.oc-cfg-node-top { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; }
.oc-cfg-pill {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.2rem 0.5rem;
  font-size: 0.65rem;
  border-radius: 999px;
  border: 1px solid transparent;
  letter-spacing: 0.04em;
  text-transform: uppercase;
}
.oc-cfg-title { font-weight: 700; font-size: 0.95rem; min-width: 0; flex: 1 1 auto; }
.oc-cfg-lines { font-size: 0.75rem; color: var(--oc-muted); white-space: nowrap; }
.oc-cfg-meta { margin-top: 2px; font-size: 0.68rem; color: var(--oc-muted); }
.oc-cfg-branch {
  border-left: 2px dashed var(--oc-border);
  margin-left: 1.5rem;
  padding-left: 1rem;
  position: relative;
}
.oc-cfg-branch::before {
  content: '';
  position: absolute;
  top: 10px;
  left: -2px;
  width: 10px;
  height: 2px;
  background: var(--oc-border);
  border-radius: 999px;
}

/* Dividers / borders */
.oc-divider { border-color: var(--oc-border); }

/* Output console colors */
.oc-console {
  background: #0a0a0a;
  color: var(--oc-console-out); /* default text color = stdout */
  border-radius: 0.5rem;
  border: 1px solid rgba(255,255,255,0.08);
}

/* Toast */
.oc-toast {
  border-radius: 0.5rem;
  background: var(--oc-fg);
  color: var(--oc-bg);
  box-shadow: 0 8px 30px rgba(0,0,0,0.25);
}

/* 1) Ensure no width transition animations on the code/output panes (safety net) */
#oc-workspace section[style] { transition: none !important; }

/* Monaco Find widget — minimal, sane alignment and spacing (cleaned up) */
.monaco-editor .find-widget { transition: none !important; }
.monaco-editor .find-widget .monaco-findInput { margin-right: 8px !important; }
.monaco-editor .find-widget .monaco-findInput .controls,
.monaco-editor .find-widget .find-actions {
  display: flex !important;
  align-items: center !important;
  gap: 4px;
}
.monaco-editor .find-widget .codicon {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  vertical-align: middle !important;
}
.monaco-editor .find-widget .codicon.codicon-close {
  position: relative !important;
  top: 0 !important;
  margin: 0 !important;
  transform: none !important;
}
.monaco-editor .find-widget .matchesCount {
  margin: 0 8px !important;
  padding: 0 !important;
}
.monaco-editor .find-widget,
.monaco-editor .find-widget .matchesCount,
.monaco-editor .find-widget .monaco-inputbox .input {
  line-height: normal !important;
}
.monaco-editor .find-widget .message {
  margin: 0 8px !important;
  padding: 0 !important;
}
/* CTA (Run) button — solid, consistent purple; subtle hover/press */
.oc-btn-cta {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  border: 1px solid transparent;
  background: var(--oc-primary-600);
  color: var(--oc-on-primary);
  border-radius: 9999px; /* allow rounded-full buttons */
  box-shadow:
    0 4px 14px rgba(124,58,237,0.25),
    inset 0 -1px 0 rgba(0,0,0,0.15);
  transition: background-color 150ms ease, box-shadow 150ms ease, transform 50ms ease, filter 150ms ease;
}
.oc-btn-cta:hover { background: var(--oc-primary-700); filter: brightness(1.02); }
.oc-btn-cta:active { transform: translateY(0.5px); box-shadow: 0 2px 10px rgba(124,58,237,0.22), inset 0 0 0 rgba(0,0,0,0.15); }
.oc-btn-cta:disabled { opacity: 0.7; cursor: not-allowed; }

/* Theming helpers */
.oc-focus:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--oc-ring);
}

/* Vertical splitter hover color respects theme primary */
.oc-splitter:hover {
  /* Use color-mix to produce a translucent hover color from primary */
  background: color-mix(in srgb, var(--oc-primary-600) 28%, transparent);
}

/* Selected listrow/pill using theme primary tint (works for all themes incl HC) */
.oc-selected {
  background: color-mix(in srgb, var(--oc-primary-600) 16%, transparent);
  outline: 1px solid color-mix(in srgb, var(--oc-primary-600) 55%, transparent);
  outline-offset: 0;
}

/* Per-line console coloring */
.oc-line-log { color: var(--oc-console-log); }
.oc-line-out { color: var(--oc-console-out); }
.oc-line-err { color: var(--oc-console-err); }
.oc-line-in  { color: var(--oc-console-in); }
